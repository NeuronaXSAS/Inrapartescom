<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Carousel</title>
    <!-- =================================================================== -->
    <!-- FAVICON (Icono para la pesta√±a del navegador y marcadores) -->
    <!-- =================================================================== -->
    <link rel="icon" type="image/png" sizes="32x32" href="Recursos_finales/favicon/favicon.png?v=2">
    <link rel="apple-touch-icon" sizes="180x180" href="Recursos_finales/favicon/apple-touch-icon.png?v=2">
    <link rel="shortcut icon" href="Recursos_finales/favicon/favicon.ico?v=2">
    <!-- =================================================================== -->
    <style>
        .test-container {
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
        }
        .categories-carousel-container{position:relative;padding:0 60px;}
        .categories-navigation{position:absolute;top:50%;transform:translateY(-50%);width:100%;display:flex;justify-content:space-between;z-index:10;pointer-events:none;}
        .nav-btn{
            background:rgba(255,255,255,0.95) !important;
            border:2px solid #FFB800 !important;
            color:#FFB800 !important;
            width:50px !important;
            height:50px !important;
            border-radius:50% !important;
            display:flex !important;
            align-items:center !important;
            justify-content:center !important;
            cursor:pointer !important;
            transition:all 0.3s ease !important;
            pointer-events:auto !important;
            box-shadow:0 4px 15px rgba(0,0,0,0.1) !important;
            z-index:100 !important;
            position:relative !important;
        }
        .categories-carousel{overflow:hidden;border-radius:8px;}
        .categories-track{
            display:flex;
            transition:transform 0.4s ease;
            gap:2rem;
        }
        .category-card{
            min-width:320px;
            max-width:320px;
            flex-shrink:0;
            flex-grow:0;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .categories-dots{
            display:flex;
            justify-content:center;
            gap:0.8rem;
            margin-top:2rem;
        }
        .categories-dots .dot{
            width:12px;
            height:12px;
            border-radius:50%;
            background:rgba(0,0,0,0.2);
            cursor:pointer;
            transition:all 0.3s ease;
        }
        .categories-dots .dot.active{
            background:#FFB800;
            transform:scale(1.2);
        }
        /* Buscador Global Minimalista */
        .global-search-btn {
          position: fixed;
          top: 24px;
          right: 24px;
          z-index: 12001;
          background: transparent;
          border: none;
          padding: 0;
          cursor: pointer;
          transition: transform 0.2s;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .global-search-btn svg {
          display: block;
        }
        .global-search-btn:active {
          transform: scale(0.95);
        }
        .global-search-overlay {
          position: fixed;
          inset: 0;
          background: rgba(30,41,59,0.82);
          z-index: 12000;
          display: none;
          align-items: center;
          justify-content: center;
          animation: fadeIn 0.3s;
        }
        .global-search-overlay.active {
          display: flex;
        }
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .global-search-modal {
          background: #fff;
          border-radius: 18px;
          box-shadow: 0 8px 40px rgba(0,0,0,0.18);
          padding: 32px 18px 24px 18px;
          max-width: 340px;
          width: 92vw;
          position: relative;
          display: flex;
          flex-direction: column;
          align-items: center;
        }
        .global-search-close {
          position: absolute;
          top: 12px;
          right: 12px;
          background: none;
          border: none;
          cursor: pointer;
          padding: 0;
        }
        .global-search-input-wrapper {
          position: relative;
          width: 100%;
          margin-top: 18px;
          display: flex;
          align-items: center;
        }
        .global-search-input {
          width: 100%;
          padding: 12px 40px 12px 14px;
          font-size: 1.05rem;
          border-radius: 10px;
          border: 2px solid #F2B705;
          background: #F8FAFC;
          color: #303030;
          font-weight: 500;
          outline: none;
          transition: border 0.2s;
        }
        .global-search-input:focus {
          border-color: #fed300;
        }
        .global-search-input-icon {
          position: absolute;
          right: 12px;
          top: 50%;
          transform: translateY(-50%);
          pointer-events: none;
        }
        @media (max-width: 600px) {
          .global-search-btn {
            top: 10px;
            right: 10px;
          }
          .global-search-modal {
            padding: 18px 6px 12px 6px;
            max-width: 98vw;
          }
          .global-search-input {
            font-size: 0.95rem;
            padding: 10px 36px 10px 10px;
          }
          .global-search-close {
            top: 6px;
            right: 6px;
          }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Test del Carrusel</h1>
        
        <div class="categories-carousel-container">
            <div class="categories-navigation">
                <button class="nav-btn prev-btn" aria-label="Anterior">‚Üê</button>
                <button class="nav-btn next-btn" aria-label="Siguiente">‚Üí</button>
            </div>
            <div class="categories-carousel">
                <div class="categories-track">
                    <div class="category-card">Card 1</div>
                    <div class="category-card">Card 2</div>
                    <div class="category-card">Card 3</div>
                    <div class="category-card">Card 4</div>
                    <div class="category-card">Card 5</div>
                    <div class="category-card">Card 6</div>
                </div>
            </div>
            <div class="categories-dots">
                <span class="dot active" data-slide="0"></span>
                <span class="dot" data-slide="1"></span>
                <span class="dot" data-slide="2"></span>
            </div>
        </div>

        <!-- Buscador Global Minimalista -->
        <button id="globalSearchBtn" aria-label="Buscar en el sitio" class="global-search-btn">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
            <circle cx="11" cy="11" r="8" stroke="#F2B705" stroke-width="3"/>
            <line x1="17" y1="17" x2="22" y2="22" stroke="#F2B705" stroke-width="3" stroke-linecap="round"/>
          </svg>
        </button>
        <div id="globalSearchOverlay" class="global-search-overlay">
          <div class="global-search-modal">
            <button id="globalSearchClose" aria-label="Cerrar b√∫squeda" class="global-search-close">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <line x1="6" y1="6" x2="18" y2="18" stroke="#303030" stroke-width="2" stroke-linecap="round"/>
                <line x1="18" y1="6" x2="6" y2="18" stroke="#303030" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
            <div class="global-search-input-wrapper">
              <input type="text" id="globalSearchInput" class="global-search-input" placeholder="Buscar en el sitio..." autocomplete="off" />
              <span class="global-search-input-icon">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                  <circle cx="11" cy="11" r="8" stroke="#F2B705" stroke-width="2"/>
                  <line x1="17" y1="17" x2="22" y2="22" stroke="#F2B705" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </span>
            </div>
          </div>
        </div>
    </div>

    <script>
        // Simple test carousel
        const testCarousel = {
            init() {
                console.log('üé† Test carousel starting...');
                
                this.track = document.querySelector('.categories-track');
                this.prevBtn = document.querySelector('.prev-btn');
                this.nextBtn = document.querySelector('.next-btn');
                this.dots = document.querySelectorAll('.categories-dots .dot');
                
                this.currentIndex = 0;
                this.cardWidth = 352;
                this.maxIndex = 3;
                
                this.bindEvents();
                this.updateCarousel();
            },
            
            bindEvents() {
                this.prevBtn.onclick = () => {
                    console.log('‚¨ÖÔ∏è PREV CLICKED');
                    this.goToPrev();
                };
                
                this.nextBtn.onclick = () => {
                    console.log('‚û°Ô∏è NEXT CLICKED');
                    this.goToNext();
                };
                
                this.dots.forEach((dot, index) => {
                    dot.onclick = () => this.goToSlide(index);
                });
            },
            
            goToPrev() {
                if (this.currentIndex > 0) {
                    this.currentIndex--;
                    this.updateCarousel();
                }
            },
            
            goToNext() {
                if (this.currentIndex < this.maxIndex) {
                    this.currentIndex++;
                    this.updateCarousel();
                }
            },
            
            goToSlide(index) {
                this.currentIndex = index;
                this.updateCarousel();
            },
            
            updateCarousel() {
                const translateX = -this.currentIndex * this.cardWidth;
                this.track.style.transform = `translateX(${translateX}px)`;
                console.log(`üéØ Moved to ${translateX}px`);
                
                this.prevBtn.disabled = this.currentIndex === 0;
                this.nextBtn.disabled = this.currentIndex >= this.maxIndex;
                
                this.dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === this.currentIndex);
                });
            }
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            testCarousel.init();
        });

        document.addEventListener('DOMContentLoaded', function() {
          const searchBtn = document.getElementById('globalSearchBtn');
          const overlay = document.getElementById('globalSearchOverlay');
          const closeBtn = document.getElementById('globalSearchClose');
          const input = document.getElementById('globalSearchInput');

          function openSearch() {
            overlay.classList.add('active');
            input.value = '';
            setTimeout(() => { input.focus(); }, 200);
            document.body.style.overflow = 'hidden';
          }
          function closeSearch() {
            overlay.classList.remove('active');
            document.body.style.overflow = '';
          }
            // Tactile support: click and touch
            function addTactileListener(el, fn) {
              el.addEventListener('click', fn);
              el.addEventListener('touchstart', function(e) {
                e.preventDefault();
                fn();
              }, {passive:false});
            }
            addTactileListener(searchBtn, openSearch);
            addTactileListener(closeBtn, closeSearch);
            overlay.addEventListener('click', function(e) {
              if (e.target === overlay) closeSearch();
            });
            input.addEventListener('keydown', function(e) {
              if (e.key === 'Escape') closeSearch();
              if (e.key === 'Enter') submitSearch();
            });
            // Submit search on Enter or search icon click
            function submitSearch() {
              const q = (input?.value || '').trim();
              if (!q) return;
              window.location.href = `resultados.html?search=${encodeURIComponent(q)}`;
            }
            // Also allow clicking the search icon to submit
            const icon = document.querySelector('.global-search-input-icon');
            if (icon) {
              addTactileListener(icon, submitSearch);
            }
        });
    </script>
</body>
</html>